[
    {
        "user": "U04UX4GL74J",
        "type": "message",
        "ts": "1704737552.691919",
        "edited": {
            "user": "U04UX4GL74J",
            "ts": "1704737602.000000"
        },
        "client_msg_id": "78d6d749-047e-471d-b732-c7b3edf0cddf",
        "text": "I’m running into some issues with relocating R, due to a hard-coded path to `which` bin `base`’s `Sys.which`. Would it be OK to change this s.t. R create a symlink to which in its install prefix, and references that instead of which directly? Makes relocation easier, and also makes it easier to deal with `which` moving to a new location (see `Sys.which` it has a hard coded path to which in its R code but also is a builtin, so hard to deal with)",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g82c803a8810",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/82c803a88109f85a836b1d48ef9bd3c7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Harmen",
            "real_name": "Harmen Stoppels",
            "display_name": "Harmen Stoppels",
            "team": "T01DW9DLB2A",
            "name": "harmen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "reply_count": 9,
        "reply_users_count": 2,
        "latest_reply": "1704895804.004399",
        "reply_users": [
            "U01KXU8UNRX",
            "U04UX4GL74J"
        ],
        "replies": [
            {
                "user": "U01KXU8UNRX",
                "ts": "1704743034.464399"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704744519.594449"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704744580.958549"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704744730.164539"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704744873.306949"
            },
            {
                "user": "U01KXU8UNRX",
                "ts": "1704750389.919499"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704895306.461549"
            },
            {
                "user": "U01KXU8UNRX",
                "ts": "1704895776.439109"
            },
            {
                "user": "U04UX4GL74J",
                "ts": "1704895804.004399"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VfKDD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I’m running into some issues with relocating R, due to a hard-coded path to "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " bin "
                            },
                            {
                                "type": "text",
                                "text": "base",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "’s "
                            },
                            {
                                "type": "text",
                                "text": "Sys.which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". Would it be OK to change this s.t. R create a symlink to which in its install prefix, and references that instead of which directly? Makes relocation easier, and also makes it easier to deal with "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " moving to a new location (see "
                            },
                            {
                                "type": "text",
                                "text": "Sys.which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " it has a hard coded path to which in its R code but also is a builtin, so hard to deal with)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01KXU8UNRX",
        "type": "message",
        "ts": "1704743034.464399",
        "client_msg_id": "d198fc18-3f82-4916-a894-86d1dad8837b",
        "text": "I *think* `which` is a dependency of R, but the path to it is hard coded in the `configuration` step. Did you built your version of R from source or from a package manager?",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "ad5dd68cbc81",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-01-22\/1671554425412_ad5dd68cbc8196426bd1_72.png",
            "first_name": "Lluís",
            "real_name": "Lluís Revilla Sancho",
            "display_name": "Lluís Revilla Sancho",
            "team": "T01DW9DLB2A",
            "name": "lluis.revilla_slack",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HFnfh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I "
                            },
                            {
                                "type": "text",
                                "text": "think",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is a dependency of R, but the path to it is hard coded in the "
                            },
                            {
                                "type": "text",
                                "text": "configuration",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " step. Did you built your version of R from source or from a package manager?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04UX4GL74J",
        "type": "message",
        "ts": "1704744519.594449",
        "client_msg_id": "75f19616-10a8-4647-8654-0569997dada6",
        "text": "Exactly, R requires `WHICH` to be an absolute path during configure, and then interpolates it in some R script inside of base. The original R source is nowhere to be found, all that’s left is some serialized stuff in `base.rdb` which contains this absolute path as byte code, and it is compressed — so in short, R requires an absolute path for which and stores it in a way that’s not grep’able",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g82c803a8810",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/82c803a88109f85a836b1d48ef9bd3c7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Harmen",
            "real_name": "Harmen Stoppels",
            "display_name": "Harmen Stoppels",
            "team": "T01DW9DLB2A",
            "name": "harmen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Z67du",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Exactly, R requires "
                            },
                            {
                                "type": "text",
                                "text": "WHICH",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to be an absolute path during configure, and then interpolates it in some R script inside of base. The original R source is nowhere to be found, all that’s left is some serialized stuff in "
                            },
                            {
                                "type": "text",
                                "text": "base.rdb",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " which contains this absolute path as byte code, and it is compressed — so in short, R requires an absolute path for which and stores it in a way that’s not grep’able"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04UX4GL74J",
        "type": "message",
        "ts": "1704744580.958549",
        "edited": {
            "user": "U04UX4GL74J",
            "ts": "1704744648.000000"
        },
        "client_msg_id": "ebaecf05-188b-4069-b501-27015c3a405f",
        "text": "I’m working on a package manager that allows people to build packages from sources and install them in a unique prefix per package; so `which` is in a non-standard path, and so is `R`.",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g82c803a8810",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/82c803a88109f85a836b1d48ef9bd3c7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Harmen",
            "real_name": "Harmen Stoppels",
            "display_name": "Harmen Stoppels",
            "team": "T01DW9DLB2A",
            "name": "harmen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "AA+U8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I’m working on a package manager that allows people to build packages from sources and install them in a unique prefix per package; so "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is in a non-standard path, and so is "
                            },
                            {
                                "type": "text",
                                "text": "R",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04UX4GL74J",
        "type": "message",
        "ts": "1704744730.164539",
        "client_msg_id": "a461b672-0126-4558-b322-709577cce1d6",
        "text": "The issue is when person A builds them and person B installs those binaries to a different location — there is some logic to rewrite paths like `&lt;person A&gt;\/which\/bin\/which -&gt; &lt;person B&gt;\/which\/bin\/which`, but obviously this fails when the `which` path is zlib compressed at a particular offset in a `base.rdb` file",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g82c803a8810",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/82c803a88109f85a836b1d48ef9bd3c7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Harmen",
            "real_name": "Harmen Stoppels",
            "display_name": "Harmen Stoppels",
            "team": "T01DW9DLB2A",
            "name": "harmen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zIeIS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The issue is when person A builds them and person B installs those binaries to a different location — there is some logic to rewrite paths like "
                            },
                            {
                                "type": "text",
                                "text": "<person A>\/which\/bin\/which -> <person B>\/which\/bin\/which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", but obviously this fails when the "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " path is zlib compressed at a particular offset in a "
                            },
                            {
                                "type": "text",
                                "text": "base.rdb",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " file"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04UX4GL74J",
        "type": "message",
        "ts": "1704744873.306949",
        "client_msg_id": "083fde24-7d4d-4902-9a38-fb022951ad93",
        "text": "I don’t want to implement an `rdb \/ rdx` parser to “relocate” some absolute path :stuck_out_tongue: I’d rather have R create a symlink `&lt;R prefix&gt;\/libexec\/R\/which -&gt; \/absolute\/path\/to\/bin\/which` or something, cause “relocation” an absolute symlink is pretty easy.\n\nOn top of that: if it’s a symlink, I can actually modify it in case `which` ever moves from one place to another",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g82c803a8810",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/82c803a88109f85a836b1d48ef9bd3c7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Harmen",
            "real_name": "Harmen Stoppels",
            "display_name": "Harmen Stoppels",
            "team": "T01DW9DLB2A",
            "name": "harmen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1fkQx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I don’t want to implement an "
                            },
                            {
                                "type": "text",
                                "text": "rdb \/ rdx",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " parser to “relocate” some absolute path "
                            },
                            {
                                "type": "emoji",
                                "name": "stuck_out_tongue",
                                "unicode": "1f61b"
                            },
                            {
                                "type": "text",
                                "text": " I’d rather have R create a symlink "
                            },
                            {
                                "type": "text",
                                "text": "<R prefix>\/libexec\/R\/which -> \/absolute\/path\/to\/bin\/which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or something, cause “relocation” an absolute symlink is pretty easy.\n\nOn top of that: if it’s a symlink, I can actually modify it in case "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " ever moves from one place to another"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01KXU8UNRX",
        "type": "message",
        "ts": "1704750389.919499",
        "client_msg_id": "c539e1af-3ce1-4aad-9638-a3600655e15f",
        "text": "You will need to rebuild R from source: <https:\/\/svn.r-project.org\/R\/trunk\/> but I guess this can be presented to R maintainers via the official channels: the r-devel mailing list (<https:\/\/stat.ethz.ch\/mailman\/listinfo\/r-devel> also check if this has been discussed previously) or the bugzilla (<https:\/\/bugs.r-project.org\/>).",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "ad5dd68cbc81",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-01-22\/1671554425412_ad5dd68cbc8196426bd1_72.png",
            "first_name": "Lluís",
            "real_name": "Lluís Revilla Sancho",
            "display_name": "Lluís Revilla Sancho",
            "team": "T01DW9DLB2A",
            "name": "lluis.revilla_slack",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1704737552.691919",
        "parent_user_id": "U04UX4GL74J",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4F\/Tu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You will need to rebuild R from source: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/svn.r-project.org\/R\/trunk\/"
                            },
                            {
                                "type": "text",
                                "text": " but I guess this can be presented to R maintainers via the official channels: the r-devel mailing list ("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/stat.ethz.ch\/mailman\/listinfo\/r-devel"
                            },
                            {
                                "type": "text",
                                "text": " also check if this has been discussed previously) or the bugzilla ("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/"
                            },
                            {
                                "type": "text",
                                "text": ")."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]