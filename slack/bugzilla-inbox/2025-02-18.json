[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18173] Man page for lm.fit is very brief about the circumstances when to use*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18173>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|INVALID                     |FIXED\n\n--- Comment #3 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nAfter all, I do agree that the _description_ part of the help can be improved\nand now did so, committing svn rev 87743 to R-devel;\nwith thanks to all helpers and Robert Gentleman's semi-private e-mail (back\nthen).",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739869434.001829",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "C6\/l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18173] Man page for lm.fit is very brief about the circumstances when to use",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18173"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|INVALID                     |FIXED\n\n--- Comment #3 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nAfter all, I do agree that the "
                            },
                            {
                                "type": "text",
                                "text": "description",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " part of the help can be improved\nand now did so, committing svn rev 87743 to R-devel;\nwith thanks to all helpers and Robert Gentleman's semi-private e-mail (back\nthen)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18223] performance issues with ave + add drop = TRUE*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223>\n\n--- Comment #6 from Thomas Soeiro (<mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>) ---\nWith R-revel c87735 (see bug 18276), using `g &lt;- interaction(..., drop = TRUE)`\n(patch below) fixes this issue.\n\n`interaction(..., drop = TRUE)` also [avoids warnings in case of unused\nlevels](<https:\/\/stat.ethz.ch\/pipermail\/r-devel\/2011-February\/059947.html>).\n\n```\nset.seed(20250218)\n\nn &lt;- 5e3\nk &lt;- 5\nx &lt;- runif(n * k)\nf1 &lt;- gl(n, k)\nf2 &lt;- gl(n * 2, k \/ 2)\n\n# R 4.4.0\nave(x, f1, f2, FUN = identity) |&gt; system.time()\n# Timing stopped at: 172.2 415.8 963\n\n# R-devel c87735 + g &lt;- interaction(..., drop = TRUE)\nave(x, f1, f2, FUN = identity) |&gt; system.time()\n#    user  system elapsed \n#    0.03    0.00    0.03 \n```\n\nThe patch:\n\n```\n--- ave.R.orig  2025-02-18 10:08:41.137532400 +0100\n+++ ave.R       2025-02-18 10:09:10.308672200 +0100\n@@ -21,7 +21,7 @@\n     if(missing(...))\n        x[] &lt;- FUN(x)\n     else {\n-       g &lt;- interaction(...)\n+       g &lt;- interaction(..., drop = TRUE)\n        split(x,g) &lt;- lapply(split(x, g), FUN)\n     }\n     x\n\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739873131.927619",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "a5hS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18223] performance issues with ave + add drop = TRUE",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #6 from Thomas Soeiro ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nWith R-revel c87735 (see bug 18276), using "
                            },
                            {
                                "type": "text",
                                "text": "g <- interaction(..., drop = TRUE)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n(patch below) fixes this issue.\n\n"
                            },
                            {
                                "type": "text",
                                "text": "interaction(..., drop = TRUE)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " also [avoids warnings in case of unused\nlevels]("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/stat.ethz.ch\/pipermail\/r-devel\/2011-February\/059947.html"
                            },
                            {
                                "type": "text",
                                "text": ").\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "set.seed(20250218)\n\nn <- 5e3\nk <- 5\nx <- runif(n * k)\nf1 <- gl(n, k)\nf2 <- gl(n * 2, k \/ 2)\n\n# R 4.4.0\nave(x, f1, f2, FUN = identity) |> system.time()\n# Timing stopped at: 172.2 415.8 963\n\n# R-devel c87735 + g <- interaction(..., drop = TRUE)\nave(x, f1, f2, FUN = identity) |> system.time()\n#    user  system elapsed \n#    0.03    0.00    0.03 \n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThe patch:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "--- ave.R.orig  2025-02-18 10:08:41.137532400 +0100\n+++ ave.R       2025-02-18 10:09:10.308672200 +0100\n@@ -21,7 +21,7 @@\n     if(missing(...))\n        x[] <- FUN(x)\n     else {\n-       g <- interaction(...)\n+       g <- interaction(..., drop = TRUE)\n        split(x,g) <- lapply(split(x, g), FUN)\n     }\n     x\n\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18223] performance issues with ave + add drop = TRUE*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223>\n\n--- Comment #7 from Thomas Soeiro (<mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>) ---\nand maybe if the previous patch is applied:\n\n```\n--- interaction.R.orig  2025-02-18 11:08:25.042979500 +0100\n+++ interaction.R       2025-02-18 11:08:49.803816100 +0100\n@@ -17,7 +17,7 @@\n #  <https:\/\/www.R-project.org\/Licenses\/>\n\n ### This is almost like the Primitive \":\" for factors\n-### but with drop=TRUE, used in reshape\n+### but with drop=TRUE, used in reshape and ave\n interaction &lt;- function(..., drop = FALSE, sep = \".\", lex.order = FALSE)\n {\n     args &lt;- list(...)\n\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739873479.946999",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "IWUR\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18223] performance issues with ave + add drop = TRUE",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #7 from Thomas Soeiro ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nand maybe if the previous patch is applied:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "--- interaction.R.orig  2025-02-18 11:08:25.042979500 +0100\n+++ interaction.R       2025-02-18 11:08:49.803816100 +0100\n@@ -17,7 +17,7 @@\n #  "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.R-project.org\/Licenses\/"
                            },
                            {
                                "type": "text",
                                "text": "\n\n ### This is almost like the Primitive \":\" for factors\n-### but with drop=TRUE, used in reshape\n+### but with drop=TRUE, used in reshape and ave\n interaction <- function(..., drop = FALSE, sep = \".\", lex.order = FALSE)\n {\n     args <- list(...)\n\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 17678] rounding error in printCoefmat*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=17678>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |WISHLIST\n                 CC|                            |maechler@stat.math.ethz.ch\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #2 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nYes, indeed, we have double rounding here, but we also have **two** different\narguments to `printCoefmat()` to steer it.\nIn this case, you can \"easily\" get the desired result by also setting `dig.tst\n= .`, using\n```\n&gt; printCoefmat(s$coef, digits = 3, dig.tst = 3)\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) -5.35008    0.42083   -12.7   &lt;2e-16 ***\nglucose      0.03787    0.00325    11.6   &lt;2e-16 ***\n....\n```\n\nNote that `printCoefmatrix()`' arguments and defaults for them have been\ntweaked for a long time and been adapted\/tweaked to many possible situations,\nand changing these now may well change `summary(&lt;model&gt;)` outputs in unforeseen\ncases;  hence, I'm not inclined to change the *defaults* e.g., for `dig.tst` \nto make this example work \"correctly\" automatically.\n\nI'm closing this now, but use __Wishlist__  so this may be re-opened by someone \nwho can spend more time to do a large test suite and re-analyze the many\ndifferent cases to which `printCoefmat()` should adapt \"optimally\".",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739878328.682359",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "IED",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 17678] rounding error in printCoefmat",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=17678"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |WISHLIST\n                 CC|                            |maechler@stat.math.ethz.ch\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #2 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nYes, indeed, we have double rounding here, but we also have **two** different\narguments to "
                            },
                            {
                                "type": "text",
                                "text": "printCoefmat()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to steer it.\nIn this case, you can \"easily\" get the desired result by also setting `dig.tst\n= .`, using"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> printCoefmat(s$coef, digits = 3, dig.tst = 3)\n            Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -5.35008    0.42083   -12.7   <2e-16 ***\nglucose      0.03787    0.00325    11.6   <2e-16 ***\n....\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nNote that "
                            },
                            {
                                "type": "text",
                                "text": "printCoefmatrix()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "' arguments and defaults for them have been\ntweaked for a long time and been adapted\/tweaked to many possible situations,\nand changing these now may well change "
                            },
                            {
                                "type": "text",
                                "text": "summary(<model>)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " outputs in unforeseen\ncases;  hence, I'm not inclined to change the "
                            },
                            {
                                "type": "text",
                                "text": "defaults",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " e.g., for "
                            },
                            {
                                "type": "text",
                                "text": "dig.tst",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " \nto make this example work \"correctly\" automatically.\n\nI'm closing this now, but use __Wishlist__  so this may be re-opened by someone \nwho can spend more time to do a large test suite and re-analyze the many\ndifferent cases to which "
                            },
                            {
                                "type": "text",
                                "text": "printCoefmat()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " should adapt \"optimally\"."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 16621] strptime(, tz=x) returns inconsistent gmtoff and tzone properties*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=16621>\n\nHeather Turner (<mailto:ht@heatherturner.net|ht@heatherturner.net>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ht@heatherturner.net\n\n--- Comment #1 from Heather Turner (<mailto:ht@heatherturner.net|ht@heatherturner.net>) ---\nI think that this issue has been fixed in recent versions of R, e.g. in R 4.4.2 \n\n```\nt &lt;- strptime('24\/Aug\/2014:17:57:26 +0200', '%d\/%b\/%Y:%H:%M:%S %z', \n              tz = 'Pacific\/Honolulu')\nt\n#&gt; [1] \"2014-08-24 05:57:26\"\nstr(unclass(t))\n#&gt; List of 11\n#&gt;  $ sec   : num 26\n#&gt;  $ min   : int 57\n#&gt;  $ hour  : int 5\n#&gt;  $ mday  : int 24\n#&gt;  $ mon   : int 7\n#&gt;  $ year  : int 114\n#&gt;  $ wday  : int 0\n#&gt;  $ yday  : int 235\n#&gt;  $ isdst : int 0\n#&gt;  $ zone  : chr \"\"\n#&gt;  $ gmtoff: int NA\n#&gt;  - attr(*, \"tzone\")= chr [1:3] \"Pacific\/Honolulu\" \"HST\" \"HPT\"\n#&gt;  - attr(*, \"balanced\")= logi TRUE\n```\n\n- the time is converted from UTC+2 to Pacific\/Honolulu time as before, but now\n`t$gmtoff` is `NA`, so there is no conflict.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739889375.662319",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "X9P",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 16621] strptime(, tz=x) returns inconsistent gmtoff and tzone properties",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=16621"
                            },
                            {
                                "type": "text",
                                "text": "\n\nHeather Turner ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ht@heatherturner.net",
                                "text": "ht@heatherturner.net"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ht@heatherturner.net\n\n--- Comment #1 from Heather Turner ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ht@heatherturner.net",
                                "text": "ht@heatherturner.net"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI think that this issue has been fixed in recent versions of R, e.g. in R 4.4.2 \n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "t <- strptime('24\/Aug\/2014:17:57:26 +0200', '%d\/%b\/%Y:%H:%M:%S %z', \n              tz = 'Pacific\/Honolulu')\nt\n#> [1] \"2014-08-24 05:57:26\"\nstr(unclass(t))\n#> List of 11\n#>  $ sec   : num 26\n#>  $ min   : int 57\n#>  $ hour  : int 5\n#>  $ mday  : int 24\n#>  $ mon   : int 7\n#>  $ year  : int 114\n#>  $ wday  : int 0\n#>  $ yday  : int 235\n#>  $ isdst : int 0\n#>  $ zone  : chr \"\"\n#>  $ gmtoff: int NA\n#>  - attr(*, \"tzone\")= chr [1:3] \"Pacific\/Honolulu\" \"HST\" \"HPT\"\n#>  - attr(*, \"balanced\")= logi TRUE\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\n- the time is converted from UTC+2 to Pacific\/Honolulu time as before, but now\n"
                            },
                            {
                                "type": "text",
                                "text": "t$gmtoff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is "
                            },
                            {
                                "type": "text",
                                "text": "NA",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", so there is no conflict."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 16621] strptime(, tz=x) returns inconsistent gmtoff and tzone properties*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=16621>\n\nAlex Bertram (<mailto:alex@bedatadriven.com|alex@bedatadriven.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Alex Bertram (<mailto:alex@bedatadriven.com|alex@bedatadriven.com>) ---\nThanks, Heather! This is certainly a blast from the best.\n\n\nBased on the output you've shared, it looks like the issue is resolved. I will\nclose this ticket as fixed.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739890814.532709",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QAZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 16621] strptime(, tz=x) returns inconsistent gmtoff and tzone properties",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=16621"
                            },
                            {
                                "type": "text",
                                "text": "\n\nAlex Bertram ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:alex@bedatadriven.com",
                                "text": "alex@bedatadriven.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Alex Bertram ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:alex@bedatadriven.com",
                                "text": "alex@bedatadriven.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThanks, Heather! This is certainly a blast from the best.\n\n\n\nBased on the output you've shared, it looks like the issue is resolved. I will\nclose this ticket as fixed."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 16733] as.POSIXlt sets isdst field incorrectly at the end of daylight saving time*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=16733>\n\nHeather Turner (<mailto:ht@heatherturner.net|ht@heatherturner.net>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ht@heatherturner.net\n\n--- Comment #1 from Heather Turner (<mailto:ht@heatherturner.net|ht@heatherturner.net>) ---\nIn `?strptime` we have\n\nYet in R-devel r87745 we get \n\n```\ndts &lt;- c(\"04\/05\/2015 01:05:00\",\n         \"04\/05\/2015 02:05:00\",  # &lt;- could be 02:05 NZDT or 02:05 NZST\n         \"04\/05\/2015 03:05:00\")\n(x &lt;- strptime(dts, \"%m\/%d\/%Y %H:%M:%S\", tz = \"Pacific\/Auckland\"))\n#&gt; [1] \"2015-04-05 01:05:00 NZDT\" \"2015-04-05 02:05:00 NZDT\"\n#&gt; [3] \"2015-04-05 03:05:00 NZST\"\n```\n\ni.e. `strptime()` assumes the 2nd time is in dst. If we add  2 minutes:\n\n```\ndts &lt;- c(\"04\/05\/2015 01:07:00\",\n         \"04\/05\/2015 02:07:00\",  # &lt;- get both at NZDT and NZST\n         \"04\/05\/2015 03:07:00\")\n(x &lt;- strptime(dts, \"%m\/%d\/%Y %H:%M:%S\", tz = \"Pacific\/Auckland\"))\n#&gt; [1] \"2015-04-05 01:07:00 NZDT\" \"2015-04-05 02:07:00 NZST\"\n#&gt; [3] \"2015-04-05 03:07:00 NZST\"\n```\n\n`strptime()` now assumes the 2nd time is not in dst. A bit strange to have the\nswitch around this point as the clocks go back at 03:00 NZST.\n\nThere was some recent work fixing an issue when the clocks go forward (Bug\n18581); so this complementary issue may be worth investigating, to see if it is\nsomething that can be fixed\/is worth fixing in R.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739891204.572169",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fe1K",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 16733] as.POSIXlt sets isdst field incorrectly at the end of daylight saving time",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=16733"
                            },
                            {
                                "type": "text",
                                "text": "\n\nHeather Turner ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ht@heatherturner.net",
                                "text": "ht@heatherturner.net"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ht@heatherturner.net\n\n--- Comment #1 from Heather Turner ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ht@heatherturner.net",
                                "text": "ht@heatherturner.net"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nIn "
                            },
                            {
                                "type": "text",
                                "text": "?strptime",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " we have\n\nYet in R-devel r87745 we get \n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "dts <- c(\"04\/05\/2015 01:05:00\",\n         \"04\/05\/2015 02:05:00\",  # <- could be 02:05 NZDT or 02:05 NZST\n         \"04\/05\/2015 03:05:00\")\n(x <- strptime(dts, \"%m\/%d\/%Y %H:%M:%S\", tz = \"Pacific\/Auckland\"))\n#> [1] \"2015-04-05 01:05:00 NZDT\" \"2015-04-05 02:05:00 NZDT\"\n#> [3] \"2015-04-05 03:05:00 NZST\"\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\ni.e. "
                            },
                            {
                                "type": "text",
                                "text": "strptime()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " assumes the 2nd time is in dst. If we add  2 minutes:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "dts <- c(\"04\/05\/2015 01:07:00\",\n         \"04\/05\/2015 02:07:00\",  # <- get both at NZDT and NZST\n         \"04\/05\/2015 03:07:00\")\n(x <- strptime(dts, \"%m\/%d\/%Y %H:%M:%S\", tz = \"Pacific\/Auckland\"))\n#> [1] \"2015-04-05 01:07:00 NZDT\" \"2015-04-05 02:07:00 NZST\"\n#> [3] \"2015-04-05 03:07:00 NZST\"\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": "strptime()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " now assumes the 2nd time is not in dst. A bit strange to have the\nswitch around this point as the clocks go back at 03:00 NZST.\n\nThere was some recent work fixing an issue when the clocks go forward (Bug\n18581); so this complementary issue may be worth investigating, to see if it is\nsomething that can be fixed\/is worth fixing in R."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18785] excessive memory consumption when computing `new.row.names` using `interaction()` in `reshape()`*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18785>\n\n--- Comment #1 from Thomas Soeiro (<mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>) ---\nc87735 (see bug 18276) also seems to solve this issue:\n\n```\nset.seed(20250218)\n\nn &lt;- 5e3\nk &lt;- 5\n\nd &lt;- data.frame(\n  id1 = gl(n, k),\n  id2 = gl(n * 4, k \/ 4),\n  x = runif(n * k),\n  y = runif(n * k)\n)\n\n# R 4.3.3\nreshape(\n  d,\n  varying = c(\"x\", \"y\"),\n  v.names = \"values\",\n  timevar = \"xy\",\n  idvar = c(\"id1\", \"id2\"),\n  times = c(\"x\", \"y\"),\n  direction = \"long\"\n) |&gt; system.time()\n#    user  system elapsed \n# 251.697   5.051 263.740 \n\n# R-devel revision 87735\nreshape(\n  d,\n  varying = c(\"x\", \"y\"),\n  v.names = \"values\",\n  timevar = \"xy\",\n  idvar = c(\"id1\", \"id2\"),\n  times = c(\"x\", \"y\"),\n  direction = \"long\"\n) |&gt; system.time()\n#    user  system elapsed \n# 135.691   1.368 137.112 \n\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739897966.887999",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iNzPv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18785] excessive memory consumption when computing ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "new.row.names",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " using ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "interaction()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "reshape()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18785"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #1 from Thomas Soeiro ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nc87735 (see bug 18276) also seems to solve this issue:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "set.seed(20250218)\n\nn <- 5e3\nk <- 5\n\nd <- data.frame(\n  id1 = gl(n, k),\n  id2 = gl(n * 4, k \/ 4),\n  x = runif(n * k),\n  y = runif(n * k)\n)\n\n# R 4.3.3\nreshape(\n  d,\n  varying = c(\"x\", \"y\"),\n  v.names = \"values\",\n  timevar = \"xy\",\n  idvar = c(\"id1\", \"id2\"),\n  times = c(\"x\", \"y\"),\n  direction = \"long\"\n) |> system.time()\n#    user  system elapsed \n# 251.697   5.051 263.740 \n\n# R-devel revision 87735\nreshape(\n  d,\n  varying = c(\"x\", \"y\"),\n  v.names = \"values\",\n  timevar = \"xy\",\n  idvar = c(\"id1\", \"id2\"),\n  times = c(\"x\", \"y\"),\n  direction = \"long\"\n) |> system.time()\n#    user  system elapsed \n# 135.691   1.368 137.112 \n\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18677] Documentation of base::gamma &amp; base::is.numeric Could be Improved.*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18677>\n\n--- Comment #9 from Jorgen Harmse (<mailto:JHarmse@roku.com|JHarmse@roku.com>) ---\nMaybe the problem is that all these derivative notations are ambiguous. If you\nsay 'Gamma' then I think of a meromorphic function on the whole complex plane,\nand then I expect complex derivatives. On the other hand, I haven't seen lgamma\nin any mathematical writing, so (3) must refer to the function that R defines\nfor real inputs, and then I expect only real derivatives. Replacing 'z' with\n'x' might help: technically it makes no difference, but one is usually\nassociated with complex numbers and the other is usually associated with real\nnumbers. The documentation in my version of R uses 'x' consistently and\ncompletely avoids complex numbers.\n\n(1) has a typo. I think you meant \\frac{d}{dx}\\log|\\Gamma(x)|.\n(2) seems the simplest. You could leave it at that or mention that the\nright-hand side is sometimes called the logarithmic derivative.\nThe first equation in (3) is right, but what is f, and why do you divide by z?\nI suggest $\\psi(x) = \\frac{d}{dx}lgamma(x) = \\frac{gamma'(x)}{gamma(x)}$ where\n$lgamma(x) = \\log|\\Gamma(x)|$.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739898323.616599",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gqy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18677] Documentation of base::gamma & base::is.numeric Could be Improved.",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18677"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #9 from Jorgen Harmse ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:JHarmse@roku.com",
                                "text": "JHarmse@roku.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nMaybe the problem is that all these derivative notations are ambiguous. If you\nsay 'Gamma' then I think of a meromorphic function on the whole complex plane,\nand then I expect complex derivatives. On the other hand, I haven't seen lgamma\nin any mathematical writing, so (3) must refer to the function that R defines\nfor real inputs, and then I expect only real derivatives. Replacing 'z' with\n'x' might help: technically it makes no difference, but one is usually\nassociated with complex numbers and the other is usually associated with real\nnumbers. The documentation in my version of R uses 'x' consistently and\ncompletely avoids complex numbers.\n\n(1) has a typo. I think you meant \\frac{d}{dx}\\log|\\Gamma(x)|.\n(2) seems the simplest. You could leave it at that or mention that the\nright-hand side is sometimes called the logarithmic derivative.\nThe first equation in (3) is right, but what is f, and why do you divide by z?\nI suggest $\\psi(x) = \\frac{d}{dx}lgamma(x) = \\frac{gamma'(x)}{gamma(x)}$ where\n$lgamma(x) = \\log|\\Gamma(x)|$."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 15811] floating point arithmetic inaccuracy leads to incorrect results from quantile() type=2*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=15811>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|CONFIRMED                   |CLOSED\n         Resolution|---                         |FIXED\n\n--- Comment #3 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nNote that my fix (comment 2) also uses a *relative* fuzz, as was discussed and\nadvocated on R-devel, see \n<https:\/\/stat.ethz.ch\/pipermail\/r-devel\/2021-September\/081098.html> .\n\nAdditionally it also fixes bug 17683 (differently than suggested there).\n\n-&gt; svn rev 87746 (for R-devel, to become R 4.5.0 in about 9 weeks).",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739898658.734039",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w5Y8l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 15811] floating point arithmetic inaccuracy leads to incorrect results from quantile() type=2",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=15811"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|CONFIRMED                   |CLOSED\n         Resolution|---                         |FIXED\n\n--- Comment #3 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nNote that my fix (comment 2) also uses a "
                            },
                            {
                                "type": "text",
                                "text": "relative",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " fuzz, as was discussed and\nadvocated on R-devel, see \n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/stat.ethz.ch\/pipermail\/r-devel\/2021-September\/081098.html"
                            },
                            {
                                "type": "text",
                                "text": " .\n\nAdditionally it also fixes bug 17683 (differently than suggested there).\n\n-> svn rev 87746 (for R-devel, to become R 4.5.0 in about 9 weeks)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 17683] [patch] add sanity checks to quantile()*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=17683>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |maechler@stat.math.ethz.ch\n         Resolution|---                         |FIXED\n\n--- Comment #1 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nsee bug 15811 (comm. 3) -- fixed differently: \none error message for several user mistakes",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739898801.596169",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "m8Z",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 17683] [patch] add sanity checks to quantile()",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=17683"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |maechler@stat.math.ethz.ch\n         Resolution|---                         |FIXED\n\n--- Comment #1 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nsee bug 15811 (comm. 3) -- fixed differently: \none error message for several user mistakes"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18677] Documentation of base::gamma &amp; base::is.numeric Could be Improved.*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18677>\n\n--- Comment #10 from Ajinkya Kokandakar (<mailto:ajinkyakokandakar@gmail.com|ajinkyakokandakar@gmail.com>) ---\n(In reply to Jorgen Harmse from comment #9)\nI apologize, I started using $f$ instead of gamma and forgot to change all of\nthem. Both `gamma` and `digamma` in `R` only work with real numbers. Also, I\nshould have used $x$ everywhere (using $z$ was a mistake).\n\nBy the way I just noticed, the \"Source\" section in the same doc mentions: \n```\nFor, x &lt; 0 and deriv &lt;= 5, the reflection formula (6.4.7) of Abramowitz and\nStegun is used.\n```\nIs that not sufficient?",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739899618.952279",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xch",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18677] Documentation of base::gamma & base::is.numeric Could be Improved.",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18677"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #10 from Ajinkya Kokandakar ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ajinkyakokandakar@gmail.com",
                                "text": "ajinkyakokandakar@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\n(In reply to Jorgen Harmse from comment #9)\nI apologize, I started using $f$ instead of gamma and forgot to change all of\nthem. Both "
                            },
                            {
                                "type": "text",
                                "text": "gamma",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "digamma",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in "
                            },
                            {
                                "type": "text",
                                "text": "R",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " only work with real numbers. Also, I\nshould have used $x$ everywhere (using $z$ was a mistake).\n\nBy the way I just noticed, the \"Source\" section in the same doc mentions: "
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For, x < 0 and deriv <= 5, the reflection formula (6.4.7) of Abramowitz and\nStegun is used.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is that not sufficient?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18860] New: minor change to improve error reporting in model.frame*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18860>\n\n            Bug ID: 18860\n           Summary: minor change to improve error reporting in model.frame\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Linux\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Analyses\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:bbolker@gmail.com|bbolker@gmail.com>\n\nCreated attachment 3454\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3454&amp;action=edit>\npatch to src\/library\/stats\/src\/model.c\n\nWith the current implementation, if the first object found matching a variable\nname appearing in a `model.frame` formula is not a list, vector, or data frame,\nthe user gets an unhelpful error message\n\n&gt; object is not a matrix\n\nwhich doesn't tell them *which* variable was not found, or what kind of\nnon-matrix it is. If the object is a (list|vector|data frame), then the error\nmessage is\n\n&gt; invalid type (TYPE) for variable 'VARIABLE'\n\nI've attached a patch that is very small, seems otherwise harmless, and would\nimprove the situation. In the [relevant bit of\nmodel.c](<https:\/\/github.com\/r-devel\/r-svn\/blob\/63369bfed9330b9461ec1d8b90d7251c0118508f\/src\/library\/stats\/src\/model.c#L138-L152>),\nthe code first calls `nrows()`, then tests the type of the object. If a\nnon-(vector|list|data frame) is passed to `nrows()`, we get the inscrutable\nerror.\n\nBy simply moving the `nrows()` call after the type-checking code, we get a more\nuseful error. In the example below, the patched version of R gives\n\n&gt;   invalid type (closure) for variable 'count'\n\nrather than 'object is not a matrix'.  They would still have to figure out what\na closure is, and that (in the hypothetical example) the first instance of\n`count` found was `dplyr::count`, but the patch seems like a moderate,\nvery-low-cost improvement.\n\nIt's hard for me to think of any potential problems caused by checking column\ntypes before finding the number of rows, but I can't completely rule it out ...\n?? For convenience, the source of `nrows` is\n[here](<https:\/\/github.com\/r-devel\/r-svn\/blob\/63369bfed9330b9461ec1d8b90d7251c0118508f\/src\/main\/util.c#L81-L94>)\n...\n\n```\n## regular fit:\ndd &lt;- mtcars\nm &lt;- model.matrix(mpg ~ wt, data = dd)\n\n## this gives us a useful error message:\ndd2 &lt;- dd[-match(\"mpg\", names(dd))]\nm &lt;- model.matrix(mpg ~ wt, data = dd2)\n## Error in eval(predvars, data, env) : object 'mpg' not found\n\ndata(\"mpg\", package = \"ggplot2\")\nm &lt;- model.matrix(mpg ~ wt, data = dd2)\n\n## still useful\n## Error in model.frame.default(object, data, xlev = xlev) : \n##   invalid type (list) for variable 'mpg'\n\n## but if we find a function instead we get something\n## much less useful:\nm &lt;- model.matrix(count ~ wt, data = dd)\n## OK (i.e. useful error message, \"object 'count' not found\")\n\n## mimic loading dplyr package (don't bother loading the whole thing)\ncount &lt;- dplyr::count\n\nm &lt;- model.matrix(count ~ wt, data = dd)\n## Error in model.frame.default(object, data, xlev = xlev) : \n##   object is not a matrix\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739916211.838159",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vACA7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18860] New: minor change to improve error reporting in model.frame",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18860"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18860\n           Summary: minor change to improve error reporting in model.frame\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Linux\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Analyses\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:bbolker@gmail.com",
                                "text": "bbolker@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3454\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3454&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3454&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\npatch to src\/library\/stats\/src\/model.c\n\nWith the current implementation, if the first object found matching a variable\nname appearing in a "
                            },
                            {
                                "type": "text",
                                "text": "model.frame",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " formula is not a list, vector, or data frame,\nthe user gets an unhelpful error message\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "object is not a matrix"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nwhich doesn't tell them "
                            },
                            {
                                "type": "text",
                                "text": "which",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " variable was not found, or what kind of\nnon-matrix it is. If the object is a (list|vector|data frame), then the error\nmessage is\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "invalid type (TYPE) for variable 'VARIABLE'"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nI've attached a patch that is very small, seems otherwise harmless, and would\nimprove the situation. In the [relevant bit of\nmodel.c]("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/blob\/63369bfed9330b9461ec1d8b90d7251c0118508f\/src\/library\/stats\/src\/model.c#L138-L152"
                            },
                            {
                                "type": "text",
                                "text": "),\nthe code first calls "
                            },
                            {
                                "type": "text",
                                "text": "nrows()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", then tests the type of the object. If a\nnon-(vector|list|data frame) is passed to "
                            },
                            {
                                "type": "text",
                                "text": "nrows()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", we get the inscrutable\nerror.\n\nBy simply moving the "
                            },
                            {
                                "type": "text",
                                "text": "nrows()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " call after the type-checking code, we get a more\nuseful error. In the example below, the patched version of R gives\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "  invalid type (closure) for variable 'count'"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nrather than 'object is not a matrix'.  They would still have to figure out what\na closure is, and that (in the hypothetical example) the first instance of\n"
                            },
                            {
                                "type": "text",
                                "text": "count",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " found was "
                            },
                            {
                                "type": "text",
                                "text": "dplyr::count",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", but the patch seems like a moderate,\nvery-low-cost improvement.\n\nIt's hard for me to think of any potential problems caused by checking column\ntypes before finding the number of rows, but I can't completely rule it out ...\n?? For convenience, the source of "
                            },
                            {
                                "type": "text",
                                "text": "nrows",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is\n[here]("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/blob\/63369bfed9330b9461ec1d8b90d7251c0118508f\/src\/main\/util.c#L81-L94"
                            },
                            {
                                "type": "text",
                                "text": ")\n...\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "## regular fit:\ndd <- mtcars\nm <- model.matrix(mpg ~ wt, data = dd)\n\n## this gives us a useful error message:\ndd2 <- dd[-match(\"mpg\", names(dd))]\nm <- model.matrix(mpg ~ wt, data = dd2)\n## Error in eval(predvars, data, env) : object 'mpg' not found\n\ndata(\"mpg\", package = \"ggplot2\")\nm <- model.matrix(mpg ~ wt, data = dd2)\n\n## still useful\n## Error in model.frame.default(object, data, xlev = xlev) : \n##   invalid type (list) for variable 'mpg'\n\n## but if we find a function instead we get something\n## much less useful:\nm <- model.matrix(count ~ wt, data = dd)\n## OK (i.e. useful error message, \"object 'count' not found\")\n\n## mimic loading dplyr package (don't bother loading the whole thing)\ncount <- dplyr::count\n\nm <- model.matrix(count ~ wt, data = dd)\n## Error in model.frame.default(object, data, xlev = xlev) : \n##   object is not a matrix\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18223] performance issues with ave + add drop = TRUE*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223>\n\nKurt Hornik (<mailto:Kurt.Hornik@wu.ac.at|Kurt.Hornik@wu.ac.at>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n                 CC|                            |Kurt.Hornik@wu.ac.at\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #8 from Kurt Hornik (<mailto:Kurt.Hornik@wu.ac.at|Kurt.Hornik@wu.ac.at>) ---\nThanks.  Both patches applied now to the trunk in c87749.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739950264.070749",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3KeFM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18223] performance issues with ave + add drop = TRUE",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223"
                            },
                            {
                                "type": "text",
                                "text": "\n\nKurt Hornik ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Kurt.Hornik@wu.ac.at",
                                "text": "Kurt.Hornik@wu.ac.at",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n                 CC|                            |Kurt.Hornik@wu.ac.at\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #8 from Kurt Hornik ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Kurt.Hornik@wu.ac.at",
                                "text": "Kurt.Hornik@wu.ac.at",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThanks.  Both patches applied now to the trunk in c87749."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18276] 'reshape()' very inefficient when length(idvar) &gt; 1L*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18276>\n\nKurt Hornik (<mailto:Kurt.Hornik@wu.ac.at|Kurt.Hornik@wu.ac.at>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #8 from Kurt Hornik (<mailto:Kurt.Hornik@wu.ac.at|Kurt.Hornik@wu.ac.at>) ---\nThe patch seems to work fine, so I am closing the PR now.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1739950305.386849",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Iwc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18276] 'reshape()' very inefficient when length(idvar) > 1L",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18276"
                            },
                            {
                                "type": "text",
                                "text": "\n\nKurt Hornik ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Kurt.Hornik@wu.ac.at",
                                "text": "Kurt.Hornik@wu.ac.at",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #8 from Kurt Hornik ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Kurt.Hornik@wu.ac.at",
                                "text": "Kurt.Hornik@wu.ac.at",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThe patch seems to work fine, so I am closing the PR now."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]