[
    {
        "subtype": "thread_broadcast",
        "user": "U01DZUA88S1",
        "thread_ts": "1674487485.246699",
        "root": {
            "user": "U01DZUA88S1",
            "type": "message",
            "ts": "1674487485.246699",
            "client_msg_id": "21129e13-eaa7-424c-85e9-7874d850444f",
            "text": "A good beginner bug report: \"*trivial error in persp example\"* <https:\/\/bugs.r-project.org\/show_bug.cgi?id=17699>.\n\nQuestions to consider:\n1. Is the reported example code still present in the help file for graphics::persp?\n2. Is the reporter's analysis correct, that the current example doesn't involve NAs, but it would if the length of x and y were set to 31? If so, what values of x and y cause NA?\n3. Assuming the issue is as reported, which (if any) of the proposed solutions make sense? Can you find a definition of the \"rotated sinc\" function? Is the scaling by 10 required, either by definition, or for the purposes of the example(s) in the help file?\nPost your findings in reply to this post. If we agree a change is a good idea, the next step will be to create a patch to make a proposed change to the documentation.",
            "team": "T01DW9DLB2A",
            "thread_ts": "1674487485.246699",
            "reply_count": 12,
            "reply_users_count": 2,
            "latest_reply": "1675671957.938429",
            "reply_users": [
                "U041CL6454N",
                "U01DZUA88S1"
            ],
            "replies": [
                {
                    "user": "U041CL6454N",
                    "ts": "1674534597.975689"
                },
                {
                    "user": "U041CL6454N",
                    "ts": "1674534660.908079"
                },
                {
                    "user": "U041CL6454N",
                    "ts": "1674535030.568329"
                },
                {
                    "user": "U041CL6454N",
                    "ts": "1674535675.253989"
                },
                {
                    "user": "U041CL6454N",
                    "ts": "1674535764.999129"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1674587225.124159"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1674587428.111869"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1674587517.635469"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1674588098.703299"
                },
                {
                    "user": "U041CL6454N",
                    "ts": "1674639932.775889"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1675092653.186209"
                },
                {
                    "user": "U01DZUA88S1",
                    "ts": "1675671957.938429"
                }
            ],
            "is_locked": false,
            "subscribed": true,
            "last_read": "1675671957.938429",
            "blocks": [
                {
                    "type": "rich_text",
                    "block_id": "MwT",
                    "elements": [
                        {
                            "type": "rich_text_section",
                            "elements": [
                                {
                                    "type": "text",
                                    "text": "A good beginner bug report: \""
                                },
                                {
                                    "type": "text",
                                    "text": "trivial error in persp example\" ",
                                    "style": {
                                        "bold": true
                                    }
                                },
                                {
                                    "type": "link",
                                    "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=17699"
                                },
                                {
                                    "type": "text",
                                    "text": ".\n\nQuestions to consider:\n"
                                }
                            ]
                        },
                        {
                            "type": "rich_text_list",
                            "elements": [
                                {
                                    "type": "rich_text_section",
                                    "elements": [
                                        {
                                            "type": "text",
                                            "text": "Is the reported example code still present in the help file for graphics::persp?"
                                        }
                                    ]
                                },
                                {
                                    "type": "rich_text_section",
                                    "elements": [
                                        {
                                            "type": "text",
                                            "text": "Is the reporter's analysis correct, that the current example doesn't involve NAs, but it would if the length of x and y were set to 31? If so, what values of x and y cause NA?"
                                        }
                                    ]
                                },
                                {
                                    "type": "rich_text_section",
                                    "elements": [
                                        {
                                            "type": "text",
                                            "text": "Assuming the issue is as reported, which (if any) of the proposed solutions make sense? Can you find a definition of the \"rotated sinc\" function? Is the scaling by 10 required, either by definition, or for the purposes of the example(s) in the help file?"
                                        }
                                    ]
                                }
                            ],
                            "style": "ordered",
                            "indent": 0,
                            "border": 0
                        },
                        {
                            "type": "rich_text_section",
                            "elements": [
                                {
                                    "type": "text",
                                    "text": "\nPost your findings in reply to this post. If we agree a change is a good idea, the next step will be to create a patch to make a proposed change to the documentation."
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "type": "message",
        "ts": "1675671957.938429",
        "client_msg_id": "a5ce92da-799c-43c1-bdda-7708f89d11c0",
        "text": "I see <@U041CL6454N>'s proposed patch to fix this bug have now been reviewed and committed to R-devel - nice work! :tada:",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "14m",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I see "
                            },
                            {
                                "type": "user",
                                "user_id": "U041CL6454N"
                            },
                            {
                                "type": "text",
                                "text": "'s proposed patch to fix this bug have now been reviewed and committed to R-devel - nice work! "
                            },
                            {
                                "type": "emoji",
                                "name": "tada",
                                "unicode": "1f389"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "tada",
                "users": [
                    "U041CL6454N"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U01DZUA88S1",
        "type": "message",
        "ts": "1675673716.107509",
        "edited": {
            "user": "U01DZUA88S1",
            "ts": "1675673766.000000"
        },
        "client_msg_id": "b05d74e3-3bea-4823-a740-1284b682a849",
        "text": "Here's another \"good first issue\" for someone to have a go at: \"*bug in predict with type=\"terms\" in the presence of missing\"*. I'll use the example given by the original poster (OP) in the report to help you get started.\n\nThe predict method for lm returns a \"constant\" attribute:\n\n```set.seed(1)\ny &lt;- rnorm(10)\nx &lt;- 1:10\nx[3] &lt;- NA\n\nm &lt;- lm(y~x)\npred &lt;- predict(m,type=\"terms\")\npred\n#&gt;               x\n#&gt; 1  -0.115529273\n#&gt; 2  -0.091348728\n#&gt; 4  -0.042987637\n#&gt; 5  -0.018807091\n#&gt; 6   0.005373455\n#&gt; 7   0.029554000\n#&gt; 8   0.053734546\n#&gt; 9   0.077915091\n#&gt; 10  0.102095637\n#&gt; attr(,\"constant\")\n#&gt; [1] 0.2397396```\nThis is constant should be added to the term-wise predictions to obtain the final predicted value:\n\n```as.vector(pred + attr(pred, \"constant\"))\n#&gt; [1] 0.1242103 0.1483909 0.1967520 0.2209325 0.2451131 0.2692936 0.2934741\n#&gt; [8] 0.3176547 0.3418352\npredict(m)\n#&gt;         1         2         4         5         6         7         8         9\n#&gt; 0.1242103 0.1483909 0.1967520 0.2209325 0.2451131 0.2692936 0.2934741 0.3176547\n#&gt;        10\n#&gt; 0.3418352```\nSo,  questions to consider:\n1. What happens in the case when the model is fitted with `na.action=\"na.exclude\"`? (Note we expect to get the same predicted values for observations 1:2, 4:10, but the vectors should get padded with an `NA` for observation 3).\n2. Assuming the issue is as reported (that the `\"constant\"`  is dropped in this case), can you debug `predict.lm` to find the root cause? Can you see how to fix it?\nPost your findings in reply to this post. If we can identify a fix, the next step with be to create a patch to the relevant function(s).",
        "team": "T01DW9DLB2A",
        "user_team": "T01DW9DLB2A",
        "source_team": "T01DW9DLB2A",
        "user_profile": {
            "avatar_hash": "g580131f5a7a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/580131f5a7a4fa33c811dc6d20ab3ef8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Heather",
            "real_name": "Heather Turner (she\/her)",
            "display_name": "Heather Turner",
            "team": "T01DW9DLB2A",
            "name": "ht",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1675673716.107509",
        "reply_count": 5,
        "reply_users_count": 2,
        "latest_reply": "1683801724.038479",
        "reply_users": [
            "U041CL6454N",
            "U01DZUA88S1"
        ],
        "replies": [
            {
                "user": "U041CL6454N",
                "ts": "1677429157.755489"
            },
            {
                "user": "U01DZUA88S1",
                "ts": "1678275071.748579"
            },
            {
                "user": "U041CL6454N",
                "ts": "1678301217.122189"
            },
            {
                "user": "U041CL6454N",
                "ts": "1681993225.393239"
            },
            {
                "user": "U01DZUA88S1",
                "ts": "1683801724.038479"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1683801724.038479",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hky",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Here's another \"good first issue\" for someone to have a go at: \""
                            },
                            {
                                "type": "text",
                                "text": "bug in predict with type=\"terms\" in the presence of missing\"",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". I'll use the example given by the original poster (OP) in the report to help you get started.\n\nThe predict method for lm returns a \"constant\" attribute:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "set.seed(1)\ny <- rnorm(10)\nx <- 1:10\nx[3] <- NA\n\nm <- lm(y~x)\npred <- predict(m,type=\"terms\")\npred\n#>               x\n#> 1  -0.115529273\n#> 2  -0.091348728\n#> 4  -0.042987637\n#> 5  -0.018807091\n#> 6   0.005373455\n#> 7   0.029554000\n#> 8   0.053734546\n#> 9   0.077915091\n#> 10  0.102095637\n#> attr(,\"constant\")\n#> [1] 0.2397396"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nThis is constant should be added to the term-wise predictions to obtain the final predicted value:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "as.vector(pred + attr(pred, \"constant\"))\n#> [1] 0.1242103 0.1483909 0.1967520 0.2209325 0.2451131 0.2692936 0.2934741\n#> [8] 0.3176547 0.3418352\npredict(m)\n#>         1         2         4         5         6         7         8         9\n#> 0.1242103 0.1483909 0.1967520 0.2209325 0.2451131 0.2692936 0.2934741 0.3176547\n#>        10\n#> 0.3418352"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nSo,  questions to consider:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "What happens in the case when the model is fitted with "
                                    },
                                    {
                                        "type": "text",
                                        "text": "na.action=\"na.exclude\"",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": "? (Note we expect to get the same predicted values for observations 1:2, 4:10, but the vectors should get padded with an "
                                    },
                                    {
                                        "type": "text",
                                        "text": "NA",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": " for observation 3)."
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Assuming the issue is as reported (that the "
                                    },
                                    {
                                        "type": "text",
                                        "text": "\"constant\"",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": "  is dropped in this case), can you debug "
                                    },
                                    {
                                        "type": "text",
                                        "text": "predict.lm",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": " to find the root cause? Can you see how to fix it?"
                                    }
                                ]
                            }
                        ],
                        "style": "ordered",
                        "indent": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nPost your findings in reply to this post. If we can identify a fix, the next step with be to create a patch to the relevant function(s)."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]